"use strict";(globalThis["webpackChunkcarapp"]=globalThis["webpackChunkcarapp"]||[]).push([[259],{259:(a,e,t)=>{t.r(e),t.d(e,{default:()=>C});var r=t(9835),n=t(6970);const o=(0,r._)("h2",{class:"text-h6 q-mb-md"},"Map Page",-1),i=(0,r._)("div",{id:"map",style:{height:"400px"}},null,-1);function l(a,e,t,l,s,c){const m=(0,r.up)("q-item-label"),d=(0,r.up)("q-item-section"),u=(0,r.up)("q-btn"),p=(0,r.up)("q-item"),k=(0,r.up)("q-card-section"),h=(0,r.up)("q-page-container"),g=(0,r.up)("q-page");return(0,r.wg)(),(0,r.iD)("template",null,[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[o,i,(0,r.Wm)(k,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.bookmarks,((a,e)=>((0,r.wg)(),(0,r.j4)(p,{key:e},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.name),1)])),_:2},1024)])),_:2},1024),(0,r.Wm)(d,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{icon:"bookmark",onClick:e=>c.centerOnBookmark(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])}t(4858);var s=t(4587),c=t.n(s);t(6196);const m={data(){return{map:null,searchAddress:"",bookmarks:[],carLayer:null,carMarker:null}},mounted(){this.initMap(),this.initCarLayer(),this.startCarTracking()},methods:{initMap(){this.map=c().map("map").setView([0,0],15),c().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map),c().Control.geocoder({defaultMarkGeocode:!1,collapsed:!1}).on("markgeocode",(a=>this.handleGeocodeResult(a))).addTo(this.map)},initCarLayer(){this.carLayer=c().realtime({url:"URL_TO_YOUR_CAR_API_ENDPOINT",crossOrigin:!0,type:"json"},{interval:5e3}).addTo(this.map)},startCarTracking(){this.carLayer.on("update",(a=>{a.features.forEach((a=>{const{geometry:e}=a,{lat:t,lon:r}=e.coordinates;this.carMarker?this.carMarker.setLatLng([t,r]):this.carMarker=c().marker([t,r]).addTo(this.map)}))}))},handleGeocodeResult(a){const e=a.geocode||a.marker.getLatLng();this.map.fitBounds(e.bbox),c().marker(e.center,{icon:this.createBookmarkIcon(e.name)}).bindPopup(e.name).addTo(this.map)},createBookmarkIcon(a){return c().divIcon({className:"custom-bookmark-icon",html:`<div>${a}</div>`})},centerOnBookmark(a){this.map.setView(a.latlng,15)}}};var d=t(1639),u=t(9885),p=t(2133),k=t(3190),h=t(490),g=t(6749),b=t(3115),w=t(4455),_=t(9984),f=t.n(_);const y=(0,d.Z)(m,[["render",l]]),C=y;f()(m,"components",{QPage:u.Z,QPageContainer:p.Z,QCardSection:k.Z,QItem:h.Z,QItemSection:g.Z,QItemLabel:b.Z,QBtn:w.Z})}}]);